## A-MACI Circuit

### Introduction

The aMACI circuit is developed based on Circom language and is divided into four independent parts: addKey, deactivate, msg, and tally, which correspond to zero-knowledge proofs generated by coordinators and voters in different stages of aMACI.

### Zero-knowledge Proof in aMACI

An aMACI system includes not only a zero-knowledge proof system composed of circuits, but also smart contracts that operate transparently on a decentralized network, as well as two independent external users, a coordinator and a voter.

In the process of aMACI, voters may generate addKey proofs, and coordinators may generate deactivate, msg, and tally proofs. Although their identities are different in the entire aMACI voting process, they are all users who "have access to private information and the ability to generate proofs" in the zero-knowledge proof stage. Therefore, in the discussion of zero-knowledge proofs in the following text, we will use "users" to refer to them uniformly.

In the zero-knowledge proof stage, the most important function of the circuit is:

- Ensure that when users enter correct private information, proof can be generated correctly.

- Ensure that when users maliciously enter incorrect or tampered private information, proof cannot be generated correctly.

Throughout the aMACI system, **users are considered responsible for causing the correct proof to be provided** and providing verifiable proofs must be in the user's own interest. If proofs cannot be generated, users may be punished by smart contracts that play a regulatory role. This consensus is very important because it represents us:

- **There is no need to** ensure that when the party user intentionally/unintentionally enters incorrect information, the proof cannot be generated correctly.

At the same time, we all agree that if users have a way to generate correct proofs using incorrect and tampered privacy information, they may make incorrect proofs that are favorable to themselves (here, errors refer to bias against objective facts, not that proofs cannot be verified. In fact, it is precisely because such incorrect proofs can be verified that there are hidden dangers), and thus profit from them.

In addition, for the sake of optimizing the cost of proof and reducing the size of zkey, we should also follow:

- If a constraint is formally sufficient, then we generally do not consider adding more redundant constraints.
